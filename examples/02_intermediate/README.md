# Python-KIS μ¤‘κΈ‰ μμ  (Intermediate Examples)

μ¤‘κΈ‰ μμ λ” μ‹¤μ „μ—μ„ μμ£Ό μ‚¬μ©λλ” κ±°λ μ „λµκ³Ό ν¬νΈν΄λ¦¬μ¤ κ΄€λ¦¬ κΈ°λ²•μ„ λ³΄μ—¬μ¤λ‹λ‹¤.

## π“ λ©λ΅

### 01_multiple_symbols.py - μ—¬λ¬ μΆ…λ© λ™μ‹ μ΅°ν λ° λ¶„μ„

**λ‚μ΄λ„**: β­β­ μ¤‘κΈ‰

**λ©ν‘**: μ—¬λ¬ μΆ…λ©μ μ‹μ„Έλ¥Ό ν• λ²μ— μ΅°νν•κ³  μ„±κ³Όλ¥Ό λΉ„κµ λ¶„μ„

**ν•™μµ ν¬μΈνΈ**:
- λ¦¬μ¤νΈ κΈ°λ° μΆ…λ© μ΅°ν
- λ°μ΄ν„° μ •λ ¬ λ° ν•„ν„°λ§
- μμµλ¥  λΉ„κµ λ¶„μ„
- ν†µκ³„ κ³„μ‚°

**μ‹¤ν–‰**:
```bash
python examples/02_intermediate/01_multiple_symbols.py
```

**μ¶λ ¥ μμ‹**:
```
π“ λ‹¨κ³„ 1: μΆ…λ© μ •λ³΄ μ΅°ν μ¤‘...
π“ λ‹¨κ³„ 2: μ„±κ³Όλ³„ μ •λ ¬ (μμµλ¥ )
π― λ‹¨κ³„ 3: μƒμΉ/ν•λ½ μΆ…λ© ν•„ν„°λ§
π“ λ‹¨κ³„ 4: ν†µκ³„
```

---

### 02_conditional_trading.py - μ΅°κ±΄ κΈ°λ° μλ™ κ±°λ

**λ‚μ΄λ„**: β­β­β­ μ¤‘κΈ‰+

**λ©ν‘**: μ„¤μ •ν• λ©ν‘κ°€μ— λ„λ‹¬ν•λ©΄ μλ™μΌλ΅ λ§¤μ/λ§¤λ„ μ‹¤ν–‰

**ν•™μµ ν¬μΈνΈ**:
- μ‹¤μ‹κ°„ κ°€κ²© λ¨λ‹ν„°λ§ (ν΄λ§)
- μ΅°κ±΄ νλ‹¨ λ΅μ§
- μλ™ μ£Όλ¬Έ μ‹¤ν–‰
- κ±°λ μ•μ „μ¥μΉ

**μ‹¤ν–‰**:
```bash
# λ¨μν¬μ
python examples/02_intermediate/02_conditional_trading.py

# μ‹¤κ³„μΆ (μ£Όμ!)
export ALLOW_LIVE_TRADES=1
python examples/02_intermediate/02_conditional_trading.py
```

**μ„¤μ • (μ½”λ“ λ‚΄ μμ • ν•„μ”)**:
```python
TARGET_BUY_PRICE = 65000   # λ©ν‘ λ§¤μκ°€
TARGET_SELL_PRICE = 70000  # λ©ν‘ λ§¤λ„κ°€
POLL_INTERVAL = 5           # ν΄λ§ κ°„κ²© (μ΄)
MAX_DURATION = 300          # μµλ€ λ¨λ‹ν„°λ§ μ‹κ°„ (μ΄)
```

**μ¶λ ¥ μμ‹**:
```
π¤– λ§¤μ μ΅°κ±΄ λ§μ΅±! (ν„μ¬κ°€ 64,500μ› <= λ©ν‘κ°€ 65,000μ›)
β… λ§¤μ μ£Όλ¬Έ μ™„λ£: ORDER_ID
π¤– λ§¤λ„ μ΅°κ±΄ λ§μ΅±! (ν„μ¬κ°€ 70,500μ› >= λ©ν‘κ°€ 70,000μ›)
β… λ§¤λ„ μ£Όλ¬Έ μ™„λ£: ORDER_ID
```

β οΈ **μ£Όμ**: 
- μ‹¤κ³„μΆμ—μ„ μ‹¤ν–‰ν•μ§€ λ§μ„Έμ” (μ‹¤μ  μ£Όλ¬Έ λ°μƒ!)
- λ°λ“μ‹ λ¨μν¬μ λ¨λ“(`virtual=true`)μ—μ„ λ¨Όμ € ν…μ¤νΈν•μ„Έμ”

---

### 03_portfolio_analysis.py - ν¬νΈν΄λ¦¬μ¤ μ„±κ³Ό λ¶„μ„

**λ‚μ΄λ„**: β­β­ μ¤‘κΈ‰

**λ©ν‘**: ν„μ¬ ν¬νΈν΄λ¦¬μ¤μ μ„±κ³Όλ¥Ό λ¶„μ„ν•κ³  μ‹κ°ν™”

**ν•™μµ ν¬μΈνΈ**:
- μ”κ³  μ •λ³΄ μ΅°ν
- μμ‚° κµ¬μ„± λ¶„μ„
- ROI κ³„μ‚°
- λ©ν‘ λ‹¬μ„±λ¥  μ¶”μ 

**μ‹¤ν–‰**:
```bash
python examples/02_intermediate/03_portfolio_analysis.py
```

**μ¶λ ¥ μμ‹**:
```
π’° μμκΈ:        1,000,000μ›
π“ μ΄μμ‚°:        1,150,000μ›
π“ ν‰κ°€μ†μµ:         150,000μ›
π“ ν‰κ°€μ†μµλ¥ :            15%
```

---

### 04_monitoring_dashboard.py - μ‹¤μ‹κ°„ λ¨λ‹ν„°λ§ λ€μ‹λ³΄λ“

**λ‚μ΄λ„**: β­β­β­ μ¤‘κΈ‰+

**λ©ν‘**: μ—¬λ¬ μΆ…λ©μ κ°€κ²©μ„ μ‹¤μ‹κ°„μΌλ΅ λ¨λ‹ν„°λ§ν•λ” λ€μ‹λ³΄λ“ κµ¬μ¶•

**ν•™μµ ν¬μΈνΈ**:
- ν΄λμ¤ κΈ°λ° μ„¤κ³„ (`StockMonitor`)
- μ‹¤μ‹κ°„ λ°μ΄ν„° κ°±μ‹ 
- μƒνƒ ν‘μ‹ (μƒμΉ/ν•λ½/λ³΄ν•©)
- λ€μ‹λ³΄λ“ UI

**μ‹¤ν–‰**:
```bash
python examples/02_intermediate/04_monitoring_dashboard.py
```

**μ¶λ ¥ μμ‹**:
```
μΆ…λ©       μ΄λ¦„         ν„μ¬κ°€      λ³€ν™”      λ³€ν™”μ¨      κ³ κ°€      μ €κ°€    μƒνƒ
005930     μ‚Όμ„±μ „μ      65,000     +500      +0.77%    65,500    64,500  π“ μƒμΉ
000660     SKν•μ΄λ‹‰μ¤    125,000     -1,000    -0.79%   126,000   124,000  π“‰ ν•λ½
```

**μ„¤μ • (μ½”λ“ λ‚΄ μμ • κ°€λ¥)**:
```python
duration = 60  # λ¨λ‹ν„°λ§ μ‹κ°„ (μ΄)
interval = 5   # κ°±μ‹  κ°„κ²© (μ΄)
```

---

### 05_advanced_order_types.py - κ³ κΈ‰ μ£Όλ¬Έ νƒ€μ…

**λ‚μ΄λ„**: β­β­β­ μ¤‘κΈ‰+

**λ©ν‘**: μ§€μ •κ°€, μ‹μ¥κ°€, λ¶„ν•  λ§¤μ λ“± λ‹¤μ–‘ν• μ£Όλ¬Έ λ°©μ‹ ν•™μµ

**ν•™μµ ν¬μΈνΈ**:
- μ§€μ •κ°€ μ£Όλ¬Έ (limit order)
- μ‹μ¥κ°€ μ£Όλ¬Έ (market order)
- λ¶„ν•  λ§¤μ μ „λµ (dollar-cost averaging, DCA)
- μ†μ /μµμ  μ„¤μ •

**μ‹¤ν–‰**:
```bash
python examples/02_intermediate/05_advanced_order_types.py
```

**ν΄λμ¤**: `AdvancedOrderer`
- `limit_order()` - μ§€μ •κ°€ μ£Όλ¬Έ
- `market_order()` - μ‹μ¥κ°€ μ£Όλ¬Έ
- `dollar_cost_averaging()` - λ¶„ν•  λ§¤μ
- `stop_loss_and_take_profit()` - μ†μ /μµμ 

---

## π€ μ¶”μ² ν•™μµ μμ„

1. **01_multiple_symbols.py** (κΈ°μ΄)
   - μ—¬λ¬ μΆ…λ© λ‹¤λ£¨κΈ°
   - λ°μ΄ν„° μ²λ¦¬ κΈ°λ³Έ

2. **03_portfolio_analysis.py** (κΈ°μ΄)
   - ν¬νΈν΄λ¦¬μ¤ κ°λ… μ΄ν•΄
   - μ„±κ³Ό λ¶„μ„

3. **05_advanced_order_types.py** (μ¤‘κΈ‰)
   - λ‹¤μ–‘ν• μ£Όλ¬Έ λ°©μ‹
   - κ±°λ μ „λµ κΈ°μ΄

4. **04_monitoring_dashboard.py** (μ¤‘κΈ‰)
   - ν΄λμ¤ μ„¤κ³„
   - μ‹¤μ‹κ°„ λ¨λ‹ν„°λ§

5. **02_conditional_trading.py** (μ¤‘κΈ‰+)
   - μλ™ κ±°λ λ΅μ§
   - μ‹¤λ¬΄ μ‘μ©

---

## π’΅ ν

### ν™κ²½ λ³€μ μ„¤μ •

```bash
# λ¨μν¬μ (μ•μ „)
export ALLOW_LIVE_TRADES=0  # λλ” μ„¤μ •ν•μ§€ μ•μ
python examples/02_intermediate/*.py

# μ‹¤κ³„μΆ (μ£Όμ!)
export ALLOW_LIVE_TRADES=1
python examples/02_intermediate/*.py
```

### μ„±λ¥ μµμ ν™”

μ—¬λ¬ μΆ…λ©μ„ μ΅°νν•  λ•λ” λ³‘λ ¬ μ²λ¦¬λ¥Ό κ³ λ ¤ν•μ„Έμ”:

```python
from concurrent.futures import ThreadPoolExecutor

symbols = ["005930", "000660", "051910"]
with ThreadPoolExecutor(max_workers=3) as executor:
    prices = list(executor.map(simple.get_price, symbols))
```

### μ—λ¬ μ²λ¦¬

λ¨λ“  μμ λ” κΈ°λ³Έ μ—λ¬ μ²λ¦¬λ¥Ό ν¬ν•¨ν•©λ‹λ‹¤:

```python
try:
    price = simple.get_price("005930")
except FileNotFoundError:
    print("β config.yamlμ΄ μ—†μµλ‹λ‹¤.")
except Exception as e:
    print(f"β μ¤λ¥: {e}")
```

---

## β οΈ μ£Όμμ‚¬ν•­

### 1. μ‹¤κ³„μΆ μ£Όλ¬Έ μ•μ „

- λ¨μν¬μ(`virtual=true`)μ—μ„ λ¨Όμ € ν…μ¤νΈν•μ„Έμ”
- μ‹¤κ³„μΆμ—μ„λ” `ALLOW_LIVE_TRADES=1` ν•„μ
- μ†μ•΅μΌλ΅ ν…μ¤νΈ ν›„ λ³Έκ²© μ‚¬μ©

### 2. API νΈμ¶ μ ν•

- λ„λ¬΄ λΉλ²ν• μ΅°νλ” rate limitingμ— κ±Έλ¦΄ μ μμ
- `POLL_INTERVAL`μ„ μ μ ν μ΅°μ •ν•μ„Έμ” (κ¶μ¥: 5μ΄ μ΄μƒ)

### 3. λ„¤νΈμ›ν¬ μ•μ •μ„±

- μΈν„°λ„· μ—°κ²°μ΄ λμ–΄μ§€λ©΄ κ±°λκ°€ μ¤‘λ‹¨λ  μ μμ
- μ¬μ‹μ‘ λ΅μ§μ„ μ¶”κ°€ν•μ„Έμ”

### 4. κ±°λ λΉ„μ©

- λ¨μν¬μλ” μμλ£κ°€ μ—†μ§€λ§ μ‹¤κ³„μΆμ—μ„λ” λ°μƒ
- κ±°λ μμµμ΄ μμλ£λ¥Ό μ΄κ³Όν•λ”μ§€ ν™•μΈν•μ„Έμ”

---

## π“– λ‹¤μ λ‹¨κ³„

κ³ κΈ‰ μμ λ¥Ό λ³΄λ ¤λ©΄ `examples/03_advanced/`λ¥Ό μ°Έμ΅°ν•μ„Έμ”:
- WebSocket μ‹¤μ‹κ°„ μ—°κ²°
- μ‚¬μ©μ μ •μ κ±°λ μ „λµ
- μ„±λ¥ λ¨λ‹ν„°λ§

---

## π¤ κΈ°μ—¬

μμ λ¥Ό κ°μ„ ν•κ±°λ‚ μƒλ΅μ΄ μ „λµμ„ μ¶”κ°€ν•κ³  μ‹¶μΌμ‹λ©΄:

1. Fork λλ” Pull Request μ μ¶
2. μ½”λ“ μ¤νƒ€μΌ κ°€μ΄λ“ μ¤€μ (PEP 8)
3. μ¶©λ¶„ν• μ£Όμ„ λ° docstring μ‘μ„±

---

**λ§μ§€λ§‰ μ—…λ°μ΄νΈ**: 2025-12-19
