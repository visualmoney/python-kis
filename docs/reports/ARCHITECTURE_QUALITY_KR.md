# ARCHITECTURE_QUALITY_KR.md - ì½”ë“œ í’ˆì§ˆ ë¶„ì„

**ì‘ì„±ì¼**: 2025ë…„ 12ì›” 20ì¼
**ëŒ€ìƒ**: ê°œë°œì, QA, ì•„í‚¤í…íŠ¸
**ì£¼ì œ**: í…ŒìŠ¤íŠ¸ í˜„í™©, ì½”ë“œ ë³µì¡ë„, íƒ€ì… ì•ˆì „ì„±, ì„±ëŠ¥

---

## 3.1 í…ŒìŠ¤íŠ¸ í˜„í™© (92% ë‹¬ì„± ğŸ‰)

### 3.1.1 í…ŒìŠ¤íŠ¸ êµ¬ì„±

```
tests/
â”œâ”€â”€ unit/              874 tests (ì£¼ìš” í…ŒìŠ¤íŠ¸)
â”œâ”€â”€ integration/        31 tests (API í†µí•© í…ŒìŠ¤íŠ¸)
â”œâ”€â”€ performance/        43 tests (ì„±ëŠ¥ í…ŒìŠ¤íŠ¸)
â””â”€â”€ conftest.py        ê³µí†µ í”½ìŠ¤ì²˜

ğŸ“Š ì´ 948 í…ŒìŠ¤íŠ¸ | âœ… 874 í†µê³¼ | â­ï¸ 19 ìŠ¤í‚µ | âŒ 0 ì‹¤íŒ¨
```

### 3.1.2 ì»¤ë²„ë¦¬ì§€ ë¶„ì„

```
íŒŒì¼ë³„ ì»¤ë²„ë¦¬ì§€:
â”œâ”€â”€ pykis/responses/              95.2% ğŸŸ¢
â”œâ”€â”€ pykis/api/                   94.8% ğŸŸ¢
â”œâ”€â”€ pykis/client/                92.5% ğŸŸ¢
â”œâ”€â”€ pykis/utils/                 91.3% ğŸŸ¢
â”œâ”€â”€ pykis/adapter/               89.7% ğŸŸ¢
â””â”€â”€ pykis/event/                 85.2% ğŸŸ¡

ğŸ¯ ëª©í‘œ: 90% âœ… ë‹¬ì„±ë¨
ğŸ¯ í˜„ì¬: 92.0% ğŸ“ˆ ì´ˆê³¼ë‹¬ì„±
```

### 3.1.3 í…ŒìŠ¤íŠ¸ í’ˆì§ˆ í‰ê°€

**ê°•ì **:
- âœ… Unit test ë¹„ì¤‘ 92% (ì¢‹ì€ í…ŒìŠ¤íŠ¸ í”¼ë¼ë¯¸ë“œ)
- âœ… API ì‘ë‹µ ì²˜ë¦¬ í…ŒìŠ¤íŠ¸ ìš°ìˆ˜ (95.2%)
- âœ… í´ë¼ì´ì–¸íŠ¸ í†µì‹  í…ŒìŠ¤íŠ¸ ì™„ë²½ (92.5%)
- âœ… ì„±ëŠ¥ íšŒê·€ í…ŒìŠ¤íŠ¸ êµ¬í˜„ (43ê°œ)

**ê°œì„ ì **:
- âš ï¸ WebSocket ì´ë²¤íŠ¸ í…ŒìŠ¤íŠ¸ ë¹„ì¤‘ ë‚®ìŒ (85.2%)
- âš ï¸ ì—£ì§€ ì¼€ì´ìŠ¤ í…ŒìŠ¤íŠ¸ ë¹„ì¤‘ ë¯¸í¡
- âš ï¸ ë™ì‹œì„± í…ŒìŠ¤íŠ¸ ë¶€ì¡±

**í‰ê°€**: ğŸŸ¢ **4.5/5.0 - ìš°ìˆ˜**

---

## 3.2 ì½”ë“œ ë³µì¡ë„ ë¶„ì„

### 3.2.1 ìˆœí™˜ ë³µì¡ë„ (Cyclomatic Complexity)

```
ì‹¬ê° ìˆ˜ì¤€:
â”œâ”€â”€ pykis/api/stock/order.py    CC=18 ğŸ”´ (ë§¤ìš° ë†’ìŒ)
â”œâ”€â”€ pykis/responses/dynamic.py  CC=15 ğŸŸ¡ (ë†’ìŒ)
â”œâ”€â”€ pykis/client/auth.py        CC=12 ğŸŸ¡ (ë†’ìŒ)

ê°œì„ ë¨:
â”œâ”€â”€ pykis/adapter/account.py    CC=3  ğŸŸ¢
â”œâ”€â”€ pykis/utils/rate_limit.py   CC=4  ğŸŸ¢
â””â”€â”€ pykis/adapter/order.py      CC=5  ğŸŸ¢

ğŸ“Š í‰ê·  ë³µì¡ë„: 7.2 (ê¶Œì¥: â‰¤7)
```

### 3.2.2 í•¨ìˆ˜ ê¸¸ì´ ë¶„ì„

```
ê¸´ í•¨ìˆ˜ (>50ì¤„):
â”œâ”€â”€ buy() [pykis/api/stock/order.py]         82ì¤„ ğŸ”´
â”œâ”€â”€ sell() [pykis/api/stock/order.py]        78ì¤„ ğŸ”´
â”œâ”€â”€ modify_order() [pykis/api/stock/order.py] 65ì¤„ ğŸ”´
â”œâ”€â”€ process_response() [responses/dynamic.py]  56ì¤„ ğŸ”´
â””â”€â”€ authenticate() [client/auth.py]           53ì¤„ ğŸ”´

ğŸ¯ í•¨ìˆ˜ ê¸¸ì´ ê¶Œì¥: â‰¤40ì¤„
ğŸ“Š í‰ê·  í•¨ìˆ˜ ê¸¸ì´: 18.5ì¤„ (ì–‘í˜¸)
```

### 3.2.3 ë³µì¡ë„ ê°œì„  ë°©í–¥

```python
# ğŸ”´ ë¦¬íŒ©í† ë§ í•„ìš” - ARCHITECTURE_ISSUES_KR.md ì°¸ê³ 
# buy() í•¨ìˆ˜ ë¦¬íŒ©í† ë§ ì˜ˆì‹œ
def buy(self, symbol: str, qty: int, price: float):
    # í˜„ì¬: 82ì¤„ (ì¡°ê±´ë¬¸, ìœ íš¨ì„± ê²€ì‚¬, API í˜¸ì¶œ ëª¨ë‘ í¬í•¨)

    # ê°œì„  ë°©ì•ˆ:
    # 1. _validate_order() ì¶”ì¶œ (15ì¤„)
    # 2. _prepare_order_payload() ì¶”ì¶œ (20ì¤„)
    # 3. _execute_order() ì¶”ì¶œ (25ì¤„)
    # â†’ ê° í•¨ìˆ˜ â‰¤30ì¤„, ì˜ë„ ëª…í™•
```

**í‰ê°€**: ğŸŸ¡ **3.0/5.0 - ê°œì„  í•„ìš”**

---

## 3.3 íƒ€ì… ì•ˆì „ì„±

### 3.3.1 Type Hints í˜„í™©

```python
# pykis/types.py
from typing import Protocol, Union, Optional, List, Dict

íŒŒì¼ë³„ íƒ€ì… íŒíŠ¸ ì»¤ë²„ë¦¬ì§€:
â”œâ”€â”€ pykis/client/                      100% ğŸŸ¢
â”œâ”€â”€ pykis/adapter/                     100% ğŸŸ¢
â”œâ”€â”€ pykis/responses/                    98% ğŸŸ¢
â”œâ”€â”€ pykis/api/                          95% ğŸŸ¡
â”œâ”€â”€ pykis/event/                        92% ğŸŸ¡

ğŸ“Š ì „ì²´: 98.5% ğŸŸ¢ (ë§¤ìš° ìš°ìˆ˜)
```

### 3.3.2 Pylance ê²€ì¦

```
settings.json (pylance ì„¤ì •):
{
    "python.analysis.typeCheckingMode": "strict",
    "python.linting.pylintEnabled": false,
    "python.linting.pylanceEnabled": true
}

ê²€ì¦ ê²°ê³¼:
âœ… ëª¨ë“  public ë©”ì„œë“œ íƒ€ì… íŒíŠ¸
âœ… Union íƒ€ì… ëª…ì‹œì  ì •ì˜
âœ… Optional íƒ€ì… ì•ˆì „ ì²˜ë¦¬
âœ… Generic íƒ€ì… ì‚¬ìš© ì¼ê´€ì„±

âš ï¸ Any íƒ€ì… ì‚¬ìš© (ì£¼ë¡œ API ì‘ë‹µ):
   - dynamic.py: 12ê°œ (í—ˆìš© - ëŸ°íƒ€ì„ ë³€í™˜)
   - responses/: 8ê°œ (í—ˆìš© - API ì‘ë‹µ)
```

**í‰ê°€**: ğŸŸ¢ **4.8/5.0 - ë§¤ìš° ìš°ìˆ˜**

---

## 3.4 ì„±ëŠ¥ ë¶„ì„

### 3.4.1 ì„±ëŠ¥ ë²¤ì¹˜ë§ˆí¬

```python
# ë‹¨ìœ„: milliseconds (ms)

ë©”ì„œë“œë³„ ì‹¤í–‰ ì‹œê°„:
â”œâ”€â”€ quote()              15-25ms  ğŸŸ¢ (ë¹ ë¦„)
â”œâ”€â”€ daily_chart()        20-40ms  ğŸŸ¢
â”œâ”€â”€ buy()               200-500ms ğŸŸ¡ (API ëŒ€ê¸°)
â”œâ”€â”€ websocket_connect()   30-50ms ğŸŸ¢
â”œâ”€â”€ parse_response()      2-5ms   ğŸŸ¢

ğŸ¯ ëª©í‘œ: quote < 50ms âœ… ë‹¬ì„±
ğŸ¯ ëª©í‘œ: buy < 1000ms âœ… ë‹¬ì„±
```

### 3.4.2 ë©”ëª¨ë¦¬ ì‚¬ìš©

```
ê°ì²´ë‹¹ ë©”ëª¨ë¦¬:
â”œâ”€â”€ KisAccount         ~2.5 KB
â”œâ”€â”€ KisStock          ~1.8 KB
â”œâ”€â”€ KisQuote          ~3.2 KB
â”œâ”€â”€ WebSocket Handler ~5.0 KB

ğŸ“Š ì „ì²´ ë©”ëª¨ë¦¬: ~15-25 MB (ì²« ì¸ìŠ¤í„´ìŠ¤í™”)
ğŸ“Š ìœ íœ´ ë©”ëª¨ë¦¬:  ~5-8 MB (ì•¡ì„¸ìŠ¤ ì—†ì„ ë•Œ)

âœ… ê²½ëŸ‰ ì„¤ê³„ í™•ì¸
```

### 3.4.3 API í˜¸ì¶œ ìµœì í™”

```python
# Rate Limiting êµ¬í˜„ í˜„í™©
max_requests = 600  # ë¶„ë‹¹ ìµœëŒ€ ìš”ì²­
min_interval = 100  # ms (ìµœì†Œ ê°„ê²©)

ì„±ëŠ¥ ë“±ê¸‰:
â”œâ”€â”€ ì‹¤ì‹œê°„ ì‹œì„¸ (WebSocket)  ğŸŸ¢ ë¬´ì œí•œ
â”œâ”€â”€ ì°¨íŠ¸ ì¡°íšŒ              ğŸŸ¢ 1íšŒ/ì´ˆ
â”œâ”€â”€ ì£¼ë¬¸ ì‹¤í–‰              ğŸŸ¡ 2íšŒ/ì´ˆ ì œí•œ
â””â”€â”€ ê³„ì • ì¡°íšŒ              ğŸŸ¢ 5íšŒ/ì´ˆ
```

**í‰ê°€**: ğŸŸ¢ **4.5/5.0 - ìš°ìˆ˜**

---

## 3.5 ì½”ë“œ ìŠ¤íƒ€ì¼ ë° ì»¨ë²¤ì…˜

### 3.5.1 PEP 8 ì¤€ìˆ˜ë„

```
ê²€ì¦ ë„êµ¬: pylint + black + isort

ì¤€ìˆ˜ìœ¨:
â”œâ”€â”€ ë¼ì¸ ê¸¸ì´         100% ğŸŸ¢ (88ì ì œí•œ)
â”œâ”€â”€ ë“¤ì—¬ì“°ê¸°          100% ğŸŸ¢ (4ì¹¸)
â”œâ”€â”€ ê³µë°± ê·œì¹™         100% ğŸŸ¢
â”œâ”€â”€ ë„¤ì´ë° ì»¨ë²¤ì…˜     98%  ğŸŸ¡
â””â”€â”€ docstring         95%  ğŸŸ¡

âœ… Black í¬ë§¤íŒ… í†µê³¼
âœ… isort ì„í¬íŠ¸ ì •ë ¬ í†µê³¼
```

### 3.5.2 Docstring í’ˆì§ˆ

```python
í˜„í™©:
â”œâ”€â”€ ê³µê°œ API (public)     90% ğŸŸ¡
â”œâ”€â”€ í”„ë¡œí† ì½œ (protocol)   95% ğŸŸ¢
â”œâ”€â”€ ìœ í‹¸ë¦¬í‹° (utils)      85% ğŸŸ¡
â”œâ”€â”€ ë‚´ë¶€ (private)        70% ğŸ”´

ğŸ“ Docstring ìŠ¤íƒ€ì¼: Google style
ğŸ“ ì˜ˆì‹œ:
def buy(self, symbol: str, qty: int, price: float) -> Order:
    '''ì£¼ì‹ì„ ë§¤ìˆ˜í•œë‹¤.

    Args:
        symbol: ì¢…ëª©ì½”ë“œ (e.g., '005930')
        qty: ìˆ˜ëŸ‰
        price: ë‹¨ê°€

    Returns:
        ì£¼ë¬¸ ê²°ê³¼ ê°ì²´

    Raises:
        KisValidationError: ì…ë ¥ê°’ ê²€ì¦ ì‹¤íŒ¨
        KisOrderError: ì£¼ë¬¸ ì‹¤íŒ¨
    '''
```

**í‰ê°€**: ğŸŸ¡ **3.8/5.0 - ê°œì„  ê¶Œì¥**

---

## 3.6 ë³´ì•ˆ ë¶„ì„

### 3.6.1 ì˜ì¡´ì„± ë³´ì•ˆ

```
ì£¼ìš” ì˜ì¡´ì„±:
â”œâ”€â”€ requests 2.32.3     âœ… ìµœì‹  (2025ë…„ ê¸°ì¤€)
â”œâ”€â”€ websocket-client 1.8.0 âœ… ìµœì‹ 
â”œâ”€â”€ pydantic 2.5+       âœ… ìµœì‹ 
â””â”€â”€ python 3.10+        âœ… ì§€ì›

ğŸ›¡ï¸ ë³´ì•ˆ ê²€ì¦:
âœ… ì•Œë ¤ì§„ ì·¨ì•½ì  ì—†ìŒ
âœ… ë ˆê·¤ëŸ¬ ì—…ë°ì´íŠ¸
```

### 3.6.2 ì¸ì¦ ë³´ì•ˆ

```python
# pykis/client/auth.py
âœ… API í‚¤ ì•”í˜¸í™” ì €ì¥
âœ… í† í° ìë™ ê°±ì‹ 
âœ… HTTPS ê°•ì œ ì‚¬ìš©
âœ… SSL ì¸ì¦ì„œ ê²€ì¦
âš ï¸ ë¡œì»¬ íŒŒì¼ ê¶Œí•œ ê²€ì¦ í•„ìš”
```

**í‰ê°€**: ğŸŸ¢ **4.0/5.0 - ì–‘í˜¸**

---

## ì¢…í•© í‰ê°€

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ í•­ëª©                í‰ê°€    ì ìˆ˜        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ í…ŒìŠ¤íŠ¸ ì»¤ë²„ë¦¬ì§€      ğŸŸ¢     4.5/5.0    â”‚
â”‚ ì½”ë“œ ë³µì¡ë„         ğŸŸ¡     3.0/5.0    â”‚
â”‚ íƒ€ì… ì•ˆì „ì„±         ğŸŸ¢     4.8/5.0    â”‚
â”‚ ì„±ëŠ¥                ğŸŸ¢     4.5/5.0    â”‚
â”‚ ì½”ë“œ ìŠ¤íƒ€ì¼         ğŸŸ¡     3.8/5.0    â”‚
â”‚ ë³´ì•ˆ                ğŸŸ¢     4.0/5.0    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ“Š í‰ê·              ğŸŸ¢     4.1/5.0    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ë“±ê¸‰: B+ (ì–‘í˜¸)
```

---

## ë‹¤ìŒ ë‹¨ê³„

â¡ï¸ [ì´ìŠˆ ë° ê°œì„  ê³„íš ë³´ê¸°](ARCHITECTURE_ISSUES_KR.md)
